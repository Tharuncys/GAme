:root {
  --bg: radial-gradient(circle at 10% 15%, #e3f4ff 0%, #eef8ff 35%, #f6fbff 65%, #fbfdff 100%);
  --card: rgba(255, 255, 255, 0.88);
  --primary: #1466cc;
  --primary-dark: #0f56ad;
  --primary-soft: #e8f2ff;
  --danger: #d6336c;
  --text: #1a2e43;
  --muted: #557086;
  --ring: rgba(20, 102, 204, 0.2);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Segoe UI", Tahoma, sans-serif;
  background: var(--bg);
  color: var(--text);
}

#app {
  width: min(1100px, 95vw);
  margin: 0 auto;
  padding: 1.5rem 0 2rem;
}

.scene { display: none; }
.scene.active { display: block; }

.card {
  backdrop-filter: blur(10px);
  background: var(--card);
  border: 1px solid rgba(159, 199, 232, 0.7);
  border-radius: 20px;
  padding: 1.8rem;
  margin: 1.25rem auto;
  box-shadow: 0 16px 34px rgba(61, 110, 150, 0.16);
  max-width: 780px;
}

.auth-card,
.form-card {
  position: relative;
  overflow: hidden;
}

.auth-card::before,
.form-card::before {
  content: "";
  position: absolute;
  inset: auto -70px -70px auto;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(128, 192, 255, 0.22), rgba(128, 192, 255, 0));
  pointer-events: none;
}

h1, h2 { margin: 0 0 0.4rem; letter-spacing: 0.01em; }
.muted { color: var(--muted); margin-top: 0.2rem; }
.hint { color: var(--muted); font-size: 0.92rem; }

.top-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
}

label {
  display: grid;
  gap: 0.38rem;
  margin-bottom: 0.9rem;
  font-weight: 600;
  font-size: 0.96rem;
}

input,
select,
button {
  font: inherit;
  border: 1px solid #b6d3eb;
  border-radius: 12px;
  padding: 0.72rem 0.9rem;
  transition: all 0.18s ease;
}

input,
select {
  background: #fff;
}

input:focus,
select:focus,
button:focus-visible {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px var(--ring);
}

button {
  cursor: pointer;
  background: #fff;
  font-weight: 600;
}

button:hover { transform: translateY(-1px); }

button.primary {
  background: linear-gradient(180deg, #1a74dc, var(--primary));
  border-color: var(--primary);
  color: #fff;
}

button.primary:hover {
  background: linear-gradient(180deg, #1f7ce6, var(--primary-dark));
}

button.danger {
  background: linear-gradient(180deg, #eb4b83, var(--danger));
  border-color: var(--danger);
  color: #fff;
}

button.link-btn {
  border: 0;
  padding: 0;
  border-radius: 0;
  color: var(--primary);
  background: transparent;
  font-weight: 700;
}

button.link-btn:hover {
  transform: none;
  color: var(--primary-dark);
  text-decoration: underline;
}

.actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.65rem;
  margin-top: 1rem;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.9rem;
}

.form-grid label {
  margin-bottom: 0;
}

.form-grid .full-width { grid-column: 1 / -1; }

.hud {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 0.5rem;
  margin-bottom: 0.7rem;
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid #d4e8fa;
  border-radius: 14px;
  padding: 0.9rem;
}

.play-area {
  position: relative;
  height: 70vh;
  border: 2px solid #bbddf8;
  border-radius: 16px;
  background: radial-gradient(circle at top, #f8fdff 0%, #d9efff 100%);
  overflow: hidden;
}

.balloon { position: absolute; font-size: 4.4rem; border: 0; background: transparent; transform-origin: center; }
.pop { animation: pop 0.22s ease-out forwards; }
@keyframes pop { from { transform: scale(1); opacity: 1; } to { transform: scale(1.65); opacity: 0; } }

#cursor {
  position: absolute;
  width: 26px;
  height: 26px;
  border-radius: 999px;
  border: 2px solid #0b5fa9;
  background: #8bccff78;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 3;
}

#trailCanvas { position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; }

#cameraPreview {
  width: 220px;
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  border-radius: 10px;
  border: 2px solid #fff;
  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.25);
  display: none;
}

.summary-card { max-width: 920px; }

.storage-box {
  margin-top: 1rem;
  padding: 0.8rem;
  border: 1px dashed #9fc7e8;
  border-radius: 10px;
  background: #f5fbff;
}

#analyticsChart {
  width: 100%;
  background: #fff;
  border: 1px solid #d8e8f7;
  border-radius: 10px;
  margin-top: 0.8rem;
}

@media (max-width: 780px) {
  .hud { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .play-area { height: 64vh; }
  .form-grid { grid-template-columns: 1fr; }
}


#dailyTrendChart { width:100%; background:#fff; border:1px solid #d8e8f7; border-radius:10px; margin-top:.8rem; }


table { width:100%; border-collapse: collapse; margin-top: .8rem; font-size: .9rem; }
th, td { border-bottom: 1px solid #e4edf6; text-align:left; padding:.45rem; }
button:disabled { opacity:.55; cursor:not-allowed; transform:none; }


.dashboard-scene h3 { margin: 0 0 .7rem; }
.dashboard-grid { display: grid; gap: .9rem; }
.dashboard-grid.two-col { grid-template-columns: 1fr 1.4fr; align-items: start; }
.kpi-grid { display:grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap:.6rem; }
.kpi-item { background:#fff; border:1px solid #d9e8f8; border-radius:10px; padding:.7rem; display:flex; flex-direction:column; gap:.25rem; }
.kpi-item span { color:#64748b; font-size:.85rem; }
.kpi-item strong { color:#0f2f52; font-size:1.2rem; }
.trend-grid { grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); }
.trend-card { background:#fff; border:1px solid #dbe8f7; border-radius:12px; padding:.65rem; }
.trend-card h4 { margin:.1rem 0 .45rem; font-size:.92rem; color:#1e3a5f; }
.trend-card canvas { width:100%; border-radius:8px; background:#f8fbff; }
.trend-pill { display:inline-block; margin-left:.35rem; font-size:.72rem; font-weight:700; padding:.12rem .4rem; border-radius:999px; }
.trend-pill.improved { background:#dcfce7; color:#166534; }
.trend-pill.steady { background:#dbeafe; color:#1d4ed8; }
.trend-pill.declined { background:#ffedd5; color:#c2410c; }
@media (max-width: 980px) {
  .dashboard-grid.two-col { grid-template-columns: 1fr; }
}
